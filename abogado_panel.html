<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Panel Abogado - Abogados Lex</title>
  <style>
    body { font-family: Arial, sans-serif; background-color: #f4f4f4; margin: 0; padding: 0; }
    header { background-color: #1e1e2f; color: white; padding: 1rem; text-align: center; position: sticky; top: 0; }
    .container { padding: 2rem; }
    table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
    th, td { border: 1px solid #ccc; padding: 0.75rem; text-align: left; }
    th { background-color: #e0e0e0; }
    button, input[type="submit"] {
      background-color: #0077b6;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 0.5rem;
    }
    .btn-danger {
      background-color: #c62828;
    }
    .hidden { display: none; }
    .section { background-color: white; padding: 1.5rem; border-radius: 5px; margin-top: 2rem; }
    input, select, textarea {
      width: 100%;
      padding: 0.5rem;
      margin-bottom: 1rem;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
  </style>
  <script>
    const causas = [
      {
        id: '001',
        cliente: 'Juan Pérez',
        tipo: 'Familia',
        estado: 'En Evaluación',
        fecha: '2025-06-18',
        documentos: [
          { descripcion: 'Demanda inicial', enlace: '#' }
        ]
      },
      {
        id: '002',
        cliente: 'María López',
        tipo: 'Tránsito',
        estado: 'Aceptada',
        fecha: '2025-06-10',
        documentos: [
          { descripcion: 'Contrato representación', enlace: '#' },
          { descripcion: 'Evidencia fotográfica', enlace: '#' }
        ]
      }
    ];

    let causaActual = null;

    function verDetalle(id) {
      causaActual = causas.find(c => c.id === id);
      document.getElementById('tabla-causas').classList.add('hidden');
      document.getElementById('detalle-causa').classList.remove('hidden');

      document.getElementById('detalle-id').textContent = causaActual.id;
      document.getElementById('detalle-cliente').textContent = causaActual.cliente;
      document.getElementById('detalle-tipo').textContent = causaActual.tipo;
      document.getElementById('detalle-estado').textContent = causaActual.estado;
      document.getElementById('detalle-fecha').textContent = causaActual.fecha;

      actualizarTablaDocumentos();
    }

    function volverALista() {
      document.getElementById('detalle-causa').classList.add('hidden');
      document.getElementById('tabla-causas').classList.remove('hidden');
    }

    function actualizarTablaDocumentos() {
      const tbody = document.getElementById('lista-documentos');
      tbody.innerHTML = '';
      causaActual.documentos.forEach((doc, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${doc.descripcion}</td>
          <td><a href="${doc.enlace}">Ver PDF</a></td>
          <td><button class="btn-danger" onclick="eliminarDocumento(${index})">Eliminar</button></td>
        `;
        tbody.appendChild(row);
      });
    }

    function eliminarDocumento(index) {
      if (confirm('¿Deseas eliminar este documento?')) {
        causaActual.documentos.splice(index, 1);
        actualizarTablaDocumentos();
      }
    }

    function subirDocumento(event) {
      event.preventDefault();
      const descripcion = document.getElementById('nueva-desc').value;
      if (descripcion.trim() !== '') {
        causaActual.documentos.push({ descripcion, enlace: '#' });
        actualizarTablaDocumentos();
        event.target.reset();
        alert('Documento subido (simulado).');
      }
    }

    function generarReporte() {
      alert("Reporte generado correctamente (simulado).");
    }
  </script>
</head>
<body>

  <header>
    <h1>Panel del Abogado</h1>
    <div style="text-align: right; margin-top: -2rem;">
      <a href="abogado_login.html" style="color: white; text-decoration: underline; font-size: 0.9rem;">Cerrar sesión</a>
    </div>
  </header>

  <main class="container">

    <!-- Vista: Tabla de causas -->
    <section id="tabla-causas">
      <h2>Todas las Causas</h2>
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Cliente</th>
            <th>Tipo</th>
            <th>Estado</th>
            <th>Fecha</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>001</td>
            <td>Juan Pérez</td>
            <td>Familia</td>
            <td>En Evaluación</td>
            <td>2025-06-18</td>
            <td><button onclick="verDetalle('001')">Ver Detalle</button></td>
          </tr>
          <tr>
            <td>002</td>
            <td>María López</td>
            <td>Tránsito</td>
            <td>Aceptada</td>
            <td>2025-06-10</td>
            <td><button onclick="verDetalle('002')">Ver Detalle</button></td>
          </tr>
        </tbody>
      </table>
    </section>

    <!-- Vista: Detalle de causa -->
    <section id="detalle-causa" class="hidden">
      <h2>Detalle de Causa</h2>
      <p><strong>ID:</strong> <span id="detalle-id"></span></p>
      <p><strong>Cliente:</strong> <span id="detalle-cliente"></span></p>
      <p><strong>Tipo:</strong> <span id="detalle-tipo"></span></p>
      <p><strong>Estado:</strong> <span id="detalle-estado"></span></p>
      <p><strong>Fecha:</strong> <span id="detalle-fecha"></span></p>

      <!-- Lista de documentos -->
      <div class="section">
        <h3>Documentos Adjuntos</h3>
        <table>
          <thead>
            <tr>
              <th>Descripción</th>
              <th>Archivo</th>
              <th>Acción</th>
            </tr>
          </thead>
          <tbody id="lista-documentos">
            <!-- contenido dinámico -->
          </tbody>
        </table>
      </div>

      <!-- Subir nuevo documento -->
      <div class="section">
        <h3>Subir Nuevo Documento</h3>
        <form onsubmit="subirDocumento(event)">
          <label for="nueva-desc">Descripción del Documento</label>
          <input type="text" id="nueva-desc" required placeholder="Ej: Contrato firmado">

          <label for="nueva-archivo">Archivo (PDF)</label>
          <input type="file" id="nueva-archivo" accept=".pdf" required>

          <input type="submit" value="Subir Documento">
        </form>
      </div>

      <button onclick="volverALista()">← Volver a Causas</button>
    </section>

    <!-- Reporte de pagos -->
    <section>
      <h2>Reporte de Pagos</h2>
      <button onclick="generarReporte()" class="btn">Generar Reporte de Pagos</button>

      <div class="section" style="margin-top: 1.5rem;">
        <h3>Pagos Realizados</h3>
        <table>
          <thead>
            <tr>
              <th>ID Cliente</th>
              <th>Nombre Cliente</th>
              <th>ID Causa</th>
              <th>Monto</th>
              <th>Fecha</th>
              <th>Medio</th>
            </tr>
          </thead>
          <tbody id="tabla-pagos">
            <tr>
              <td>001</td>
              <td>Juan Pérez</td>
              <td>001</td>
              <td>$85.000</td>
              <td>2025-06-20</td>
              <td>Transferencia</td>
            </tr>
            <tr>
              <td>002</td>
              <td>María López</td>
              <td>002</td>
              <td>$121.400</td>
              <td>2025-06-22</td>
              <td>Tarjeta</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

  </main>
</body>
</html>
